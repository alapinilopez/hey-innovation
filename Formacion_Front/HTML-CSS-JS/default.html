<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Default</title>
    <link rel="stylesheet" href="/hey-innovation/Formacion_Front/HTML-CSS-JS/styles/IBS.css">
</head>

<body>
    <header>
        <h1>Bienvenido a nuestra página web</h1>
    </header>

    <main>
        <!-- Tabla que contiene otra tabla con un formulario básico    -->
        <table id="container">
            <tr>
                <td>
                    <table id="content">
                        <tr>
                            <td>
                                <form action="" id="small">
                                    <label for="email">E-mail</label>
                                    <br><input type="email" name="email" id="email">
                                    <br>
                                    <label for="pwd">Contraseña</label>
                                    <br><input type="password" name="pwd" id="password" 
                                        title="La contraseña debe ser superior a 4 caracteres y debe contener, al menos, un número">
                                    <br>
                                    <br>
                                    <input type="submit" value="Aceptar" onclick="applyValidation()">
                                    <div id="displayError">Ha habido un error</div>
                                </form>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>

        <button onclick="newWindow()">Hola Mundo</button>
    </main>

    <script>
        function applyValidation() {
            var displayError = document.getElementById("displayError");
            const validEmailRegex = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
            const validPasswordRegex = /^((?=.*\d).{4,})$/;
            var email = document.getElementById('email').value;
            var password = document.getElementById('password').value;
            const flags = new Map([
                ["email", false],
                ["password", false]
            ])
            if (validEmailRegex.test(email)) {
                flags.set("email", true);
            }
            if (validPasswordRegex.test(password)) {
                flags.set("password", true);
            }
            for (let [key, value] of flags.entries()) {
                if (value == false) {
                    return displayError.style.display = "block";
                }
            }
            if (value == true) {
                return displayError.style.display = "none";
            }
        }

        function newWindow() {
            window.open("/hey-innovation/Formacion_Front/HTML-CSS-JS/holaMundo.html", "targetWindow", "height=320px, width=150px")
        }
    </script>
</body>

</html>